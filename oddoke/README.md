# 5/19~5/23 어덕해 개발 일기
## 아티스트 자료 수집 및 모델링
- 포카마켓에서 트로트 가수, 야구팀 제외하고 아티스트 수집
- 멜론에 검색해서 display_name이 영어인지 한글인지 확인 => 영어명, 한글명 모두 수집, 줄임말 있는 경우 기재함
- 멤버 정보는 네이버에 검색해서 수집, 이 과정에서 해체한 팀 있는지 검색해서 확인, 해체한 그룹의 경우 목록에서 제외
- 트위터 프로필 이미지에서 로고 사진 수집, 트위터 프로필이 로고가 아닌 경우 구글에 검색해서 수집
- 아티스트 목록 csv 파일 => 모든 가수를 한글 오름차순으로 정렬해서 id값 부여
- 아티스트 모델링 => display_name, english_name, korean_name, alias 필드 부여
- Django-import-export 라이브러리 사용하여 아티스트 데이터 밀어 넣기
- 아티스트 목록 csv 파일에 logo 칼럼 추가하여 이미지 경로 작성
- 처음에는 로컬에서 불러오려고 했는데 자꾸 오류가 나서 강사님께 도움을 요청했더니 static/image/ 폴더 안에 이미지를 넣고 그 경로를 불러오는 게 좋다는 답변을 받음
- 경로 전부 수정...
- 했더니 문제 해결 완료!
- 아티스트 목록 불러오기 성공! 아티스트 로고가 전부 보이는 화면을 스크롤하는데 너무 뿌듯했다

## 모델링 변경
- 앱 구성을 “유저 / 아티스트 / 덕팜 / 덕담 / 덕생”으로 나누기로 하고 글 쓰는 post 모델을 덕팜에서 하나, 덕생에서 하나 생성했는데 막상 만들어보니 게시판에서 카테고리에 따라 작성해야하는 필드가 다르다보니 null값이 많이 생성됨
- 덕팜(거래/대여/분철), 덕담(커뮤니티/예절샷/생카후기)로 모델 분리하기로 결정
- SQLD 공부하다보니 이게 정규화인 것 같다...
- 일단 공통으로 들어가는 필드(제목, 내용, 이미지 등)를 받을 베이스 포스트 모델을 만들고 나머지 포스트 모델에서 베이스 모델을 상속함
- 모델이 분리 됐으므로 forms.py/urls.py/views.py/html template 전부 수정 작업에 들어갔다......... 이 과정 중에 기존에 예쁘게 꾸며뒀던 것들 전부 날아가서 눈물 났음ㅜ 물론 하나하나 고쳐야될 거 찾아서 수정하느라 눈도 빠질 것 같았음....
- 모델마다 crud 로직을 전부 분리하자니 중복되는 코드가 너무 많아서 카테고리를 불러주는 함수들을 utils.py에 생성하고 views.py에서는 한번에 처리하도록 코드를 작성
- 이 부분은 거의 gpt가 하라는 대로 해서 코드 보면서 어떻게 짠건지 확인해봐야함...
- 덕담 먼저 만들고 덕팜 만들었는데 덕함은 필드가 더 많았고...
- 거래 글이랑 대여 글은 구성이 거의 비슷한데 분철팟만 혼자 너무 달라서 상속을 두번 하도록 모델을 구성함 => 코드 중복 많이 줄여서 혼자 속으로 뿌듯했다
- BasePost -> MarketPost -> SellPost, RentalPost
- BasePost -> SplitPost
- 나머지는 덕담에서 만들어둔 거 그대로 따라하면서 모델명만 맞게 수정함
- 이틀에 걸쳐서 모델 분리 완료!
- 근데 이제 이미지를 여러개 업로드하는 기능을 넣으려고 했더니 포스트 모델이 6개인 게 또 문제가 됨.......... 이거 어케하묘

# 5/25~5/31 어덕해 개발 일기
## 최애 멤버 선택 기능
- 아티스트 인덱스에서 최애 아티스트 선택 => 마이페이지에서 최애 멤버 선택
- 그룹 로고 클릭 시 멤버 목록 모달창 생성
- 여기서 nct 때문에 문제가 발생하는데...
- nct127 소속 멤버가 nct dream에도 소속되어있어서 nct127의 마크라는 멤버를 팔로우 했을 때 nct dream의 마크도 같은 사람이지만 다른 사람으로 인식되고 있었다. nct127 마크와 nct dream 마크가 다른 id값을 가지고 있었기 때문인데 csv 파일을 수정하여 같은 사람으로 인식되게 수정 => nct127의 마크를 팔로우하면 nct dream 목록을 볼 때 이미 팔로우중인 걸로 나오게 했다.

- 수정 전

| artist | member |
| --- | --- |
| nct | 마크 |
| nct dream | 마크 |
| nct 127 | 마크 |
- 마크는 한명인데 아이디값이 세개

- 수정 후
| artist | member |
| --- | --- |
| "nct, nct dream, nct 127" | 마크 |
- 같은 아이디 값을 가지도록 수정

## 리팩토링
- 아티스트와 포스트 모델을 연결하는 작업을 하다보니 덕팜의 create.html과 edit.html, 덕담의 create.html과 edit.html 규격이 모두 비슷한데 수정을 4번 해야하는 과정이 너무 불편하게 느껴졌다. => 유지보수성과 확장성을 위해서 리팩토링 하기로 결정
- include 방식과 extends 방식 (장단점 비교)

|  | `extends` | `include` |
| --- | --- | --- |
| 목적 | 상속(공통 레이아웃) | 재사용(반복 요소) |
| 사용 방식 | 부모-자식 구조 (블록으로 채워넣음) | 특정 위치에 그대로 삽입 |
| 예시 용도 | base.html → home.html, detail.html 등 | header.html, navbar.html, footer.html 등 |
| 코드 중복 관리 | 계층적 관리 / 전체적인 통일성 유지 | 독립된 일부 요소의 재사용 |
